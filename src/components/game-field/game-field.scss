@use "../../grid-mixins";

@import "../../theme";
@import "../../names";

$border-style: outset;

.#{$FIELD} {
  --t: #{$tile-color-1};
  position: relative;
  margin: 0 auto;
  justify-content: center;
  height: fit-content;
  border: calc(var(--s-size) / 10) solid $tile-color-alpha;

  @include grid-mixins.board-tile-grid;
  @include grid-mixins.board-tile-grid-variables;

  .row {
    display: contents;

    &:nth-child(even) {
      .#{$CELL} {
        &:nth-child(odd) {
          --t: #{$tile-color-2};
        }
      }
    }

    &:nth-child(odd) {
      .#{$CELL}:not(:nth-child(odd)) {
        --t: #{$tile-color-2};
      }
    }
  }
}

.#{$START_BUTTON} {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  z-index: 6;
}

.#{$CELL} {
  background-color: var(--t);
  display: grid;
  place-items: center;
  position: relative;

  .#{$CAT_BOX} {
    z-index: 3;
    transition: transform 0.3s;

    .#{$WON} & {
      animation: hueRotation 1s 0.5s linear 3;
    }
  }

  .#{$OBJECT_BOX} {
    z-index: 2;
    transition:
      transform 0.3s,
      opacity 0.3s;
  }

  .#{$CAT} {
    &:not(.#{$IS_MOM}) {
      transform: scale(0.7) translate(var(--t-x, 0), 22%);
    }

    svg {
      ellipse {
        transform-box: fill-box;
        transform-origin: center;
        animation: eye-blink 8s 4s infinite;

        .#{$WON} & {
          animation: none;
        }
      }
    }
  }

  .#{$IS_MOM} {
    transform: scale(0.95);
  }

  > .#{$CAT_BOX},
  > .#{$OBJECT_BOX} {
    grid-area: 1 / 1;
  }
}

// scale y
@keyframes eye-blink {
  0% {
    transform: scaleY(1);
  }
  3% {
    transform: scaleY(0);
  }
  6% {
    transform: scaleY(1);
  }
  9% {
    transform: scaleY(0);
  }
  12% {
    transform: scaleY(1);
  }
}

@keyframes hueRotation {
  0% {
    filter: hue-rotate(0deg);
  }
  100% {
    filter: hue-rotate(360deg);
  }
}
