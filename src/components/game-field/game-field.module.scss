@use "sass:color";
@use "../../grid-mixins";

@use "../../theme" as *;
@use "../../names" as *;

$border-style: outset;

.field {
  --t: #{$tile-color-1};
  position: relative;
  margin: 0 auto;
  justify-content: center;
  height: fit-content;
  border: calc(var(--s-size) / 10) solid $tile-color-alpha;
  overflow: hidden;
  transition: border-color 0.3s;

  @include grid-mixins.board-tile-grid;
  @include grid-mixins.board-tile-grid-variables;

  .row {
    display: contents;
  }

  :global(.#{$DARKNESS}):not(:global(.#{$WON})) & {
    --t: #{color.mix($tile-color-1, $bg-primary, 10%)};
    border-color: color.mix($tile-color-1, $bg-primary, 15%);
  }
}

.loader {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  opacity: 0.5;
  white-space: nowrap;
  font-family: $font-family-special;
}

:global(.#{$CELL}) {
  background-color: var(--t);
  display: grid;
  place-items: center;
  position: relative;
  transition: background-color 0.3s;

  :global(.#{$CAT_BOX}) {
    z-index: 3;
    transition: transform 0.3s;

    :global(.#{$WON}) & {
      animation: hueRotation 1s 0.5s linear 3;
    }
  }

  :global(.#{$OBJECT_BOX}) {
    z-index: 2;
    transition:
      transform 0.3s,
      opacity 0.3s;
  }

  > :global(.#{$CAT_BOX}),
  > :global(.#{$OBJECT_BOX}) {
    grid-area: 1 / 1;
  }
}

@keyframes hueRotation {
  0% {
    filter: hue-rotate(0deg);
  }
  100% {
    filter: hue-rotate(360deg);
  }
}
